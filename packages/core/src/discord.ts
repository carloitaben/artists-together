import type { RESTOptions } from "@discordjs/rest"
import { REST } from "@discordjs/rest"
import { API } from "@discordjs/core/http-only"

export function createDiscordClient({
  token,
  ...options
}: Partial<RESTOptions> & { token: string }) {
  const rest = new REST({
    // @ts-expect-error
    makeRequest: globalThis.fetch,
    version: "10",
    ...options,
  }).setToken(token)

  return new API(rest)
}

export const dc = createDiscordClient({
  authPrefix: "Bot",
  token: String(process.env.DISCORD_BOT_TOKEN),
})

function id(production: string, development: string) {
  return process.env.NODE_ENV === "development" ? development : production
}

export const CHANNELS = {
  ANNOUNCEMENTS: id("766882582688170004", "1101914069537132645"),
  ABOUT: id("770660333747568680", "1100827961244008510"),
  ART_EMERGENCIES: id("969979594373472316", "1099334764835651624"),
  BOT_SHENANIGANS: id("774144500007174145", "1102173767549071361"),
  INTRODUCTIONS: id("1133112638272974928", "1099296890538963016"),
  RULES_N_FAQ: id("766783113568976896", "1100827654355161188"),
  SEEKING_CRITIQUE: id("766784264129085513", "1101849113848463382"),
  NEWS: id("1101176459290214591", "1101914484852924426"),
} as const

export type Channels = typeof CHANNELS

export type Channel = Channels[keyof Channels]

export const ROLES = {
  ADMIN: id("762898079862882367", "1096870186461696152"),
  MODERATOR: id("766375640639209472", "1101842475947139122"),
  ARTIST: id("766376379456421918", "1101560472685248583"),
  FRIEND: id("766932970107699211", "1099296505438937088"),
  GUEST: id("1101174650018480168", "1099287460715954246"),
  PAL: id("1101885930429755464", "1101913205380485122"),
  WEB: id("1147242776040321074", "1231623420634988565"),
  ART_STREAMER: id("1101175249933967521", "1101842668235010139"),
  TECH_SUPPORT: id("784147921444667443", "1101842721532035194"),
  LIVE_NOW: id("776685926998867980", "1100357964772151317"),
  SERVER_BOOSTER: id("774195159478697987", "1101842761658925097"),
  PRONOUNS_THEY_THEM: id("780234876409741342", "1097474639384555550"),
  PRONOUNS_SHE_HER: id("780234195846823946", "1097474589841436722"),
  PRONOUNS_HE_HIM: id("780234701218250792", "1097474617960042628"),
  REGION_AFRICA: id("780236094251204608", "1099278497031127111"),
  REGION_WEST_EUROPE: id("1101883239087489195", "1099278555466170399"),
  REGION_EAST_EUROPE: id("1101883262953062461", "1099278586348847135"),
  REGION_WEST_ASIA: id("1101883176923693098", "1099278615608315934"),
  REGION_EAST_ASIA: id("1101883201472958525", "1099278644481900627"),
  REGION_NORTH_AMERICA: id("780235217247797279", "1099278670813728768"),
  REGION_SOUTH_AMERICA: id("780236583097204736", "1099278692678635520"),
  REGION_OCEANIA: id("780235905964703775", "1099278710760284240"),
  REGION_CARIBBEAN: id("1101883143042113607", "1099278739977818132"),
  REGION_MIDDLE_EAST: id("1101883372919341177", "1099278805065011331"),
} as const

export type Roles = typeof ROLES

export type Role = Roles[keyof Roles]
